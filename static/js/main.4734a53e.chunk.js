(this["webpackJsonpinvoice-portal"]=this["webpackJsonpinvoice-portal"]||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(20)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),l=n.n(c),o=(n(13),n(3)),u=n(1),i=n(2),m=(n(14),function(e){return r.a.createElement("tr",{className:"Line"},-1===e.context?r.a.createElement(r.a.Fragment,null,r.a.createElement("th",null,"Code"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Dimensions"),r.a.createElement("th",null,"Unit price"),r.a.createElement("th",null,"Format"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Subtotal")):null,1!==e.context||e.product.hide?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,"[",e.product.code,"]"),r.a.createElement("td",{onClick:e.openProductModal},r.a.createElement("span",{className:"name"},e.product.name)),r.a.createElement("td",null,"(",e.product.dimensions,")"),r.a.createElement("td",null,e.moneyFormat(e.product.unitPrice)),r.a.createElement("td",null,r.a.createElement("div",{className:"select"},r.a.createElement("select",{onChange:function(t){return e.changeFormat(parseInt(t.target.value))},defaultValue:e.product.format.id},e.product.formats.map((function(e,t){return r.a.createElement("option",{value:e.id,key:t},e.name," (",e.qty," units)")}))))),r.a.createElement("td",null,r.a.createElement("input",{type:"number",onChange:function(t){return e.changeQuantity(""!==t.target.value?parseInt(t.target.value):0)},value:e.product.quantity})),r.a.createElement("td",null,e.moneyFormat(e.product.subtotal))),2===e.context?r.a.createElement(r.a.Fragment,null,r.a.createElement("td",null,"[",e.product.code,"]"),r.a.createElement("td",{onClick:e.openProductModal},r.a.createElement("span",{className:"name"},e.product.name)),r.a.createElement("td",null,"(",e.product.dimensions,")"),r.a.createElement("td",null,e.moneyFormat(e.product.unitPrice)),r.a.createElement("td",null,r.a.createElement("span",null,e.product.format.name," (",e.product.format.qty," units)")),r.a.createElement("td",null,r.a.createElement("span",null,e.product.quantity," (",e.product.quantity*e.product.format.qty," units)",e.product.boQuantity>0?r.a.createElement("span",null," (+ ",e.product.boQuantity," ",e.product.format.name,"(s) / bo)"):null)),r.a.createElement("td",null,e.moneyFormat(e.product.subtotal))):null)}),s=function(e){return r.a.createElement("div",{className:"Search"},r.a.createElement("strong",null,"Search"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",null,"Code"),r.a.createElement("input",{onChange:function(t){return e.searchHandler({productCode:t.target.value})},value:e.search.productCode})),r.a.createElement("li",null,r.a.createElement("span",null,"Name"),r.a.createElement("input",{onChange:function(t){return e.searchHandler({productName:t.target.value})},value:e.search.productName}))))},d=(n(15),function(e){var t=Object(u.a)(Array(5-e.products.length).keys()).map((function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",{colSpan:"7"}))})),n=r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"7"},"No products matching these filters"));return r.a.createElement("div",{className:"ProductsSelection"},r.a.createElement(s,{products:e.products,search:e.search,searchHandler:function(t){return e.searchHandler(t)}}),r.a.createElement("div",{className:"table-wrapper"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement(m,{context:-1})),r.a.createElement("tbody",null,e.products.map((function(t,n){return r.a.createElement(m,{changeQuantity:function(n){return e.changeQuantity(t.id,n)},changeFormat:function(n){return e.changeFormat(t.id,n)},openProductModal:function(){return e.openProductModal(t.id)},moneyFormat:e.moneyFormat,product:t,context:1,key:n})})),t,0===Object(u.a)(e.products).filter((function(e){return!e.hide})).length?n:null),r.a.createElement("caption",null,r.a.createElement("div",{className:"psa"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer facilisis lobortis malesuada. Sed maximus imperdiet tempus. Quisque a gravida ligula."),r.a.createElement("p",null,"Subtotal: ",r.a.createElement("strong",null,e.moneyFormat(e.total))),r.a.createElement("button",{onClick:e.submit,disabled:e.total<=0},"Next step")))))}),p=function(e){var t=Object(u.a)(Array(5-e.order.products.length).keys()).map((function(e){return r.a.createElement("tr",{key:e},r.a.createElement("td",{colSpan:"7"}))}));return r.a.createElement("div",{className:"ProductsValidation"},r.a.createElement("div",{className:"table-wrapper"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement(m,{context:-1})),r.a.createElement("tbody",null,e.order.products.map((function(t,n){return r.a.createElement(m,{moneyFormat:function(t){return e.moneyFormat(t)},product:t,context:2,openProductModal:function(){return e.openProductModal(t.id)},key:n})})),t),r.a.createElement("caption",null,r.a.createElement("div",{className:"psa"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer facilisis lobortis malesuada. Sed maximus imperdiet tempus. Quisque a gravida ligula."),r.a.createElement("p",null,"Total: ",r.a.createElement("strong",null,e.moneyFormat(e.total))),r.a.createElement("button",{onClick:e.back},"Edit order"),r.a.createElement("button",{onClick:e.submit},"Next step")))))},f=function(e){return r.a.createElement("li",null,r.a.createElement("strong",null,"[",e.product.code,"] ",e.product.name),r.a.createElement("br",null),r.a.createElement("span",null,e.product.quantity," ",e.product.format.name,"(s) (",e.product.quantity*e.product.format.qty," units)",e.product.boQuantity>0?r.a.createElement("span",null," (+ ",e.product.boQuantity," ",e.product.format.name,"(s) / bo)"):null),r.a.createElement("br",null),r.a.createElement("span",null,e.moneyFormat(e.product.subtotal)))},E=function(e){return r.a.createElement("div",{className:"OrderSummary"},r.a.createElement("ul",null,e.order.products.map((function(t){return r.a.createElement(f,{product:t,moneyFormat:function(t){return e.moneyFormat(t)},key:t.id})}))),r.a.createElement("strong",null,"Total: ",e.moneyFormat(e.total)))},y=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Add a comment to your order"),r.a.createElement("textarea",{onChange:function(t){return e.saveComment(t.target.value)}},e.order.comment))},v=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("strong",null,"Pick-up at our location"),r.a.createElement("input",{type:"radio",name:"choice",value:"pickup",onChange:function(t){return e.saveChoice(t.target.value)}})),r.a.createElement("li",null,r.a.createElement("strong",null,"Delivery"),r.a.createElement("input",{type:"radio",name:"choice",value:"delivery",onChange:function(t){return e.saveChoice(t.target.value)}}))),"delivery"===e.order.deliveryChoice?r.a.createElement("div",null,r.a.createElement("h3",null,"Choose delivery address"),r.a.createElement("ul",null,e.user.addresses.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement("strong",null,t.name),r.a.createElement("br",null),r.a.createElement("span",null,t.street),r.a.createElement("br",null),r.a.createElement("span",null,t.city,", ",t.state,", ",t.country),r.a.createElement("br",null),r.a.createElement("span",null,t.zip),r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"address",value:t.id,onChange:function(t){return e.saveAddress(t.target.value)}}))})))):null)},b=function(e){return r.a.createElement("div",{className:"OrderDelivery"},r.a.createElement("div",{className:"options"},r.a.createElement(v,{saveChoice:function(t){return e.saveDeliveryChoice(t)},saveAddress:function(t){return e.saveDeliveryAddress(t)},order:e.order,user:e.user}),r.a.createElement(y,{saveComment:function(t){return e.saveComment(t)},order:e.order})),r.a.createElement("div",{className:"summary"},r.a.createElement(E,{order:e.order,total:e.total,moneyFormat:function(t){return e.moneyFormat(t)}}),r.a.createElement("button",{disabled:!e.order.deliveryChoice||"delivery"===e.order.deliveryChoice&&!e.order.deliveryAddressId,onClick:e.submit},"Order")))},h=function(e){return r.a.createElement("div",null,r.a.createElement("p",null,"Your order has been sent to our processing facilities."),r.a.createElement("p",null,"Thanks for trusting us with your business !"))},O=(n(16),function(e){return r.a.createElement("li",{className:"BackOrderOption",onClick:e.click},r.a.createElement("strong",null,e.option.name),r.a.createElement("p",null,e.option.description.replace(/{CODE}/,e.product.code).replace(/{AVAILQTY}/,Math.floor(e.product.inventory/e.product.format.qty)).replace(/{AVAILUNITS}/,e.product.inventory+" unit(s)").replace(/{BOUNITS}/,e.product.quantity*e.product.format.qty-e.product.inventory+" unit(s)").replace(/{FORMAT}/,e.product.format.name+"(s)")))}),g=function(e){return r.a.createElement("ul",{className:"BackOrderOptions"},e.options.map((function(t,n){return r.a.createElement(O,{option:t,product:e.product,click:function(){return e.selectOption(t.id)},key:n})})))},C=(n(17),function(e){return r.a.createElement("div",{className:"Modal"},r.a.createElement("div",{className:"darken",onClick:e.close}),r.a.createElement("div",{className:"content"},e.close?r.a.createElement("span",{className:"close",onClick:e.close},"Close"):null,e.children))}),j=(n(18),function(e){var t=Object(a.useState)(1),n=Object(i.a)(t,2),c=n[0],l=n[1],m=Object(a.useState)([]),s=Object(i.a)(m,2),f=s[0],E=s[1],y=Object(a.useState)({}),v=Object(i.a)(y,2),O=v[0],j=v[1],N=Object(a.useState)([]),k=Object(i.a)(N,2),q=k[0],F=k[1],S=Object(a.useState)("Place an order"),A=Object(i.a)(S,2),M=A[0],P=A[1],Q=Object(a.useState)(0),I=Object(i.a)(Q,2),T=I[0],D=I[1],x=Object(a.useState)([{id:1,name:"Don't order this product",description:"Remove {CODE} from your order"},{id:2,name:"Only order the available inventory",description:"Only order {AVAILQTY} {FORMAT} ( {AVAILUNITS} )"},{id:3,name:"Order the available inventory and put the rest in back order",description:"Only order {AVAILQTY} {FORMAT} ( {AVAILUNITS} ) and put {BOUNITS} in back order"}]),L=Object(i.a)(x,2),w=L[0],V=(L[1],Object(a.useState)({productName:"",productCode:""})),B=Object(i.a)(V,2),U=B[0],H=B[1];Object(a.useEffect)((function(){var t=Object(u.a)(e.products);t.map((function(e){return e.format=e.formats[0],e.quantity=0,e.subtotal=0,e.boQuantity=0,e.hide=!1,e})),E(t)}),[e.products]),Object(a.useEffect)((function(){for(var e=0,t=0;t<f.length;t++)e+=f[t].subtotal;D(e)}),[f]),Object(a.useEffect)((function(){var e=Object(u.a)(f);e.map((function(e){return e.code.includes(U.productCode)&&e.name.includes(U.productName)?e.hide=!1:e.hide=!0,e})),E(e)}),[U]),Object(a.useEffect)((function(){var e=Object(o.a)({},O);e.products&&F(e.products.filter((function(e){return e.quantity*e.format.qty>e.inventory})))}),[O]);var z=function(e){var t=Object(u.a)(e);return t.map((function(e){return e.subtotal=e.format.qty*e.quantity*e.unitPrice,e})),t},R=function(e){return e.toLocaleString("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:4})},Y=function(){j({products:Object(u.a)(e.products).filter((function(e){return e.quantity>0}))})},G=r.a.createElement(d,{changeQuantity:function(e,t){return function(e,t){var n=Object(u.a)(f);n.find((function(t){return t.id===e})).quantity=t,n=z(n),E(n)}(e,t)},changeFormat:function(e,t){return function(e,t){var n=Object(u.a)(f),a=n.find((function(t){return t.id===e}));a.format=a.formats.find((function(e){return e.id===t})),n=z(n),E(n)}(e,t)},openProductModal:function(t){return e.openProductModal(t)},products:f,total:T,search:U,searchHandler:function(e){return t=e,void H(Object(o.a)(Object(o.a)({},U),t));var t},submit:function(){Y(),P("Validate order"),l(2)},moneyFormat:function(e){return R(e)}}),J=r.a.createElement(p,{order:O,openProductModal:function(t){return e.openProductModal(t)},total:T,submit:function(){P("Delivery / Pick-up"),l(3)},back:function(){j({}),H({productName:"",productCode:""}),P("Modify order"),l(1)},moneyFormat:function(e){return R(e)}}),W=r.a.createElement(b,{order:O,total:T,moneyFormat:function(e){return R(e)},saveComment:function(e){return function(e){var t=Object(o.a)(Object(o.a)({},O),{},{comment:e});j(t)}(e)},saveDeliveryChoice:function(e){return function(e){var t=Object(o.a)(Object(o.a)({},O),{},{deliveryChoice:e,deliveryAddressId:null});j(t)}(e)},saveDeliveryAddress:function(e){return function(e){var t=Object(o.a)(Object(o.a)({},O),{},{deliveryAddressId:e});j(t)}(e)},user:e.user,submit:function(){P("Order sent !"),l(4)}}),$=r.a.createElement(h,{title:M,order:O});return r.a.createElement("div",{className:"Order"},r.a.createElement("div",{className:"title-container"},r.a.createElement("h1",null,M)),1===c?G:null,2===c?J:null,3===c?W:null,4===c?$:null,q.length>0?r.a.createElement(C,null,r.a.createElement("div",{className:"BackOrderModal"},r.a.createElement("h1",null,"This product is in back order..."),r.a.createElement("h2",null,"[",q[0].code,"] ",q[0].name),r.a.createElement("span",null,"Please select one of these options"),r.a.createElement(g,{options:w,product:q[0],selectOption:function(e){return function(e,t){var n=Object(o.a)({},O);n.products.map((function(n){if(n.id===t)if(1===e)n.quantity=0;else if(2===e)n.quantity=Math.floor(n.inventory/n.format.qty);else if(3===e){var a=n.quantity;n.quantity=Math.floor(n.inventory/n.format.qty),n.boQuantity=a-n.quantity}return n})),n.products=z(n.products.filter((function(e){return e.quantity>0}))),j(n)}(e,q[0].id)}}))):null)}),N=function(e){return r.a.createElement("div",{className:"Product"},r.a.createElement("h1",null,e.infos.name),r.a.createElement("h2",null,e.infos.code),r.a.createElement("p",null,e.infos.description))},k=(n(19),function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),c=n[0],l=n[1],m=Object(a.useState)({open:!1,product:null}),s=Object(i.a)(m,2),d=s[0],p=s[1],f=Object(a.useState)({}),E=Object(i.a)(f,2),y=E[0],v=E[1],b=function(){var e,t=(e=5,Object(u.a)(Array(e).keys()).map((function(e){return{id:e+1,code:"AA-000"+e,name:"Contenant mince pour mets \xe0 emporter \xe0 rebord doubl\xe9",dimensions:3*e+2+"PO",inventory:1e3,formats:[{id:1,name:"Boite",qty:100},{id:2,name:"Caisse",qty:1e3}],unitPrice:.0852*e+.7,description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vitae enim quis ligula facilisis viverra. Sed tortor sem, facilisis in nibh in, aliquet elementum felis. Sed sit amet gravida orci, eu rutrum urna. Pellentesque auctor orci at nunc accumsan cursus. Maecenas tempus mauris eget tempus eleifend. Sed mollis, leo in cursus convallis, risus metus sodales risus, ut vestibulum felis dolor non enim. Aliquam lobortis massa eget sodales sollicitudin."}})));l(t)};return Object(a.useEffect)((function(){b(),v({name:"Chez Sam",addresses:[{id:1,name:"Main office",street:"8754 rue du Chevalet",number:"",city:"Qu\xe9bec",state:"QC",country:"Canada",zip:"G2C 0L4"},{id:2,name:"Main office",street:"8754 rue du Chevalet",number:"",city:"Qu\xe9bec",state:"QC",country:"Canada",zip:"G2C 0L4"}]})}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("div",{id:"app-content"},r.a.createElement(j,{openProductModal:function(e){return p({open:!0,product:e})},products:c,user:y})),d.open?r.a.createElement(C,{close:function(){return p({open:!1,product:null})}},r.a.createElement(N,{infos:Object(o.a)({},c.find((function(e){return e.id===d.product})))})):null)});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.4734a53e.chunk.js.map